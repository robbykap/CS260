<!DOCTYPE html>
<html data-bs-theme="dark" lang="en">
  <head>
    <title>Optimal Lifts</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />

    <css>
      <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css"
      />
      <link
        rel="stylesheet"
        href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css"
      />
      <link rel="stylesheet" href="css/mainStylesheet.css" />
    </css>
    <js>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script defer src="https://code.jquery.com/jquery-3.7.0.js"></script>
      <script
        defer
        src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"
      ></script>
      <script
        defer
        src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"
      ></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
      <script>
        $(document).ready(function () {
          $("#profile").DataTable({
            autoWidth: true,
            scrollY: "400px",
            scrollX: true,
            dom: "<lf<t>Bip>",
            lengthMenu: [
              [10, 20, 25, 50, -1],
              [10, 20, 25, 50, "All"],
            ],
            columnDefs: [
              { width: "175px", targets: 0 },
              { width: "70px", targets: 1 },
              { width: "70px", targets: 2 },
              { width: "70px", targets: 3 },
              { width: "70px", targets: 4 },
            ],
            buttons: [
              "csv",
              {
                extend: "pdfHtml5",
                orientation: "landscape",
                pageSize: "LEGAL",
              },
            ],
          });
        });
      </script>
      <script>
        fetch("json/profile.json")
          .then((response) => response.json())
          .then((data) => {
            data.forEach((row) => {
              row.total = row.squat + row.bench + row.deadlift;
            });

            data.forEach((row) => {
              $("#profile").append(
                "<tr><td>" +
                  row.date +
                  "</td><td>" +
                  row.squat +
                  "</td><td>" +
                  row.bench +
                  "</td><td>" +
                  row.deadlift +
                  "</td><td>" +
                  row.total +
                  "</td></tr>"
              );
            });
          });
      </script>
      <script>
        fetch("json/profile.json")
          .then((response) => response.json())
          .then((data) => {
            const dates = data.map((entry) => entry.date);
            const squatValues = data.map((entry) => entry.squat);
            const benchValues = data.map((entry) => entry.bench);
            const deadliftValues = data.map((entry) => entry.deadlift);

            const ctx = document
              .getElementById("progressGraph")
              .getContext("2d");

            new Chart(ctx, {
              type: "line",
              data: {
                labels: dates,
                datasets: [
                  {
                    label: "Squat",
                    data: squatValues,
                    borderColor: "#4c6171",
                    backgroundColor: "#4c6171",
                    borderWidth: 6,
                    fill: false,
                    font: {
                      weight: "bold",
                    },
                  },
                  {
                    label: "Bench",
                    data: benchValues,
                    borderColor: "#3c6280",
                    backgroundColor: "#3c6280",
                    borderWidth: 6,
                    fill: false,
                  },
                  {
                    label: "Deadlift",
                    data: deadliftValues,
                    borderColor: "#1b4463",
                    backgroundColor: "#1b4463",
                    borderWidth: 6,
                    fill: false,
                  },
                ],
              },
              options: {
                plugins: {
                  tooltip: {
                    displayColors: false,
                    backgroundColor: "#373c44", // Change the background color of the tooltip box
                    titleColor: "#9aa9ad",
                    titelAlign: "center",
                    titleFont: {
                      size: 18,
                      weight: "bold",
                      family: "OCR A Std, monospace",
                    },
                    bodyColor: "#9aa9ad",
                    bodyAlign: "center",
                    bodyFont: {
                      size: 18,
                      family: "OCR A Std, monospace",
                    },
                  },
                  legend: {
                    position: "right",
                    onClick: (click, legendItem, legend) => {
                      const datasets = legend.legendItems.map(
                        (dataset, index) => {
                          return dataset.text;
                        }
                      );
                      const index = datasets.indexOf(legendItem.text);

                      if (legend.chart.isDatasetVisible(index) === true) {
                        legend.chart.hide(index);
                      } else {
                        legend.chart.show(index);
                      }
                    },
                    labels: {
                      generateLabels: (chart) => {
                        let visibility = [];
                        for (let i = 0; i < chart.data.datasets.length; i++) {
                          if (chart.isDatasetVisible(i) === true) {
                            visibility.push("#373c44");
                          } else {
                            visibility.push("#666c75");
                          }
                        }
                        return chart.data.datasets.map((dataset, index) => ({
                          text: dataset.label,
                          fillStyle: dataset.backgroundColor,
                          strokeStyle: dataset.borderColor,
                          fontColor: visibility[index],
                        }));
                      },
                      padding: 20,
                      boxWidth: 30,
                      font: {
                        weight: "bold",
                        size: 20,
                        family: "OCR A Std, monospace",
                      },
                    },
                  },
                },
                scales: {
                  x: {
                    ticks: {
                      color: "#373c44",
                      font: {
                        weight: "bold",
                        size: 18,
                        family: "OCR A Std, monospace",
                      },
                    },
                    grid: {
                      display: false,
                    },
                  },
                  y: {
                    beginAtZero: true,
                    ticks: {
                      color: "#373c44",
                      font: {
                        weight: "bold",
                        size: 18,
                        family: "OCR A Std, monospace",
                      },
                    },
                    grid: {
                      display: false,
                    },
                  },
                },
              },
            });
          });
      </script>
    </js>
  </head>

  <body>
    <header class="top-nav">
      <h1
        class="text-center"
        style="font-weight: bold; font-size: 50px; color: #272b2e"
      >
        Optimal Lifts
      </h1>
      <menu>
        <div>
          <a class="tabs" href="index.html">Home</a>
          <a class="tabs" href="leaderboard.html">Leaderboard</a>
          <a class="tabs" href="qa.html">Q&A</a>
          <a class="tabs" href="profile.html">Profile</a>
        </div>
      </menu>
    </header>

    <div class="d-grid">
      <div class="container py-5 px-5 w-50" id="container">
        <h1 class="text-center" style="font-weight: bold; color: #272b2e">
          dude0001
        </h1>
        <br />
        <table
          id="profile"
          class="table table-striped hover"
          style="width: 100%"
        >
          <thead>
            <tr>
              <th>Date</th>
              <th>Squat</th>
              <th>Bench</th>
              <th>Deadlift</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <!-- JSON data -->
          </tbody>
          <tfoot>
            <tr>
              <th>Date</th>
              <th>Squat</th>
              <th>Bench</th>
              <th>Deadlift</th>
              <th>Total</th>
            </tr>
          </tfoot>
        </table>
        <br />
        <h1 class="text-center" style="font-weight: bold; color: #272b2e">
          Progress
        </h1>
        <br />
        <canvas id="progressGraph">
          <!-- JSON data -->
        </canvas>
      </div>

      <div class="navbar align-end">
        <footer>
          <span class="text-reset">About Webpage</span>
          <br />
          <a class="github" href="https://github.com/robbykap/startup"
            >Optimal Lifts Repo</a
          >
        </footer>
      </div>
    </div>
  </body>
</html>
